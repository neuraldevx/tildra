generator client {
  provider = "prisma-client-py"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

// /Users/jakechristensen/snipsummary/prisma/schema.prisma

model User {
  id        String   @id @default(uuid())
  clerkId   String   @unique
  email     String   @unique
  firstName String?
  lastName  String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Subscription & Usage Fields
  plan          String   @default("free") // 'free' or 'premium'
  summariesUsed Int      @default(0)
  summaryLimit  Int      @default(5)
  usageResetAt  DateTime @default(now()) @map("usageResetAt")
  // isAdminOrDev  Boolean  @default(false) // Skipping for now

  // --- Stripe Fields ---
  stripeCustomerId       String?   @unique // Optional: Maps to Stripe Customer ID
  stripeSubscriptionId   String?   @unique // Optional: Maps to Stripe Subscription ID
  stripePriceId          String? // Optional: Maps to the Stripe Price ID (e.g., monthly/yearly premium)
  stripeCurrentPeriodEnd DateTime? // Optional: Tracks when the current paid period ends
  profileImageUrl        String? // Optional: stores the user's profile image URL

  @@map("users")
}
